<!-- {{ listarDisponibilidadDocente() | json }}
{{ seleccionarDocente() | json }} -->
<!-- {{ 'ID DEL PROGRAMA'+ ' '  + this.selectSemestreLocal().idProgramaAcademico }} -->
@if (!loading) {
<app-card headerClassTemplate="py-10 flex justify-content-between align-item-center w-full">
  <ng-template #headerTitleTemplate>

    <div>DISPONIBILIDAD HORARIA DE {{ seleccionarDocente().nombreApellido }} </div>

    <div class="flex justify-content-end gap-2">
      @for (local of localesFiltrados; track $index) {
        <div class="flex align-items-center mr-4">
          <div [style.background-color]="localColors[$index]" style="width: 20px; height: 20px; border-radius: 50%"></div>
          <div class="font-normal text-xs">{{ local.nombre }}</div>
        </div>
      }
      <div class="flex">
        <div style="width: 20px; height: 20px; border-radius: 50%; background-color: rgb(200, 200, 200);"></div>
        <div class="font-normal text-xs">OTRO PROGRAMA</div>
      </div>
    </div>

  </ng-template>
  <table mat-table [dataSource]="horasAcademicas">
    <ng-container matColumnDef="hora">
      <th mat-header-cell *matHeaderCellDef>Hora</th>
      <td mat-cell *matCellDef="let hora">{{hora}}</td>
    </ng-container>

    <ng-container *ngFor="let dia of dias; let diaIndex = index">
      <ng-container matColumnDef="{{dia}}">
        <th mat-header-cell *matHeaderCellDef>{{dia}}</th>
        <td mat-cell *matCellDef="let hora; let horaIndex = index" [ngClass]="{
            'clase-pintada': esCeldaPintada(diaIndex + 1, horaIndex + 1) && !esCeldaBloqueada(diaIndex + 1, horaIndex + 1),
            'celda-agregar': isAdding(diaIndex + 1, horaIndex + 1) && !esCeldaBloqueada(diaIndex + 1, horaIndex + 1),
            'celda-eliminar': isRemoving(diaIndex + 1, horaIndex + 1) && !esCeldaBloqueada(diaIndex + 1, horaIndex + 1),
            'celda-bloqueada': esCeldaBloqueada(diaIndex + 1, horaIndex + 1),
          }" [style.background-color]="getLocalColor(diaIndex + 1, horaIndex + 1)"
          (mousedown)="startSelection(diaIndex + 1, horaIndex + 1)"
          (mousemove)="draggingSelection(diaIndex + 1, horaIndex + 1)" (mouseup)="endSelection()">
        </td>
      </ng-container>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</app-card>
}
@else {
  <ui-loading-progress-bar></ui-loading-progress-bar>
}  
<!-- {{ celdasSeleccionadas | json }} -->
<!-- <full-calendar [options]="calendarOptions"></full-calendar> -->